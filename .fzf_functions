# FZF Functions
# https://github.com/junegunn/fzf/wiki/examples






# Fuzzy Change Directory (only within directories situated recursively below current context)
fd() {
  local dir
  dir=$(find . -type d | fzf) &&
  cd "$dir" && ls -a
}


# Fuzzy Open File (only files nested recursively within current context)
fo() {
  local file
  file=$(find . -type f | fzf --preview 'cat {}' --delimiter / --with-nth -1) &&
  open "$file"
}

# Fuzzy Open File (from common working directory)
fow() {
  local file
  file=$(find $TEACH $PROF $ADMIN $PROJ -type f | fzf --preview 'cat {}' --delimiter / --with-nth -1) &&
  open "$file"
}


# Fuzzy Open File in Atom (only files nested recursively within current context)
fa() {
  local file
  file=$(find . -type f | fzf --preview 'cat {}') &&
  a "$file"
}


# Fuzzy Move File to Common Working Directories
fmw() {
  local file
  file=$(find . -type f | fzf --preview 'cat {}') &&
  local dir
  dir=$(find $TEACH $PROF $ADMIN $PROJ -type d | fzf)
  mv "$file" "$dir"
}

# Fuzzy Move File to Common Kitob Khona directories
## note: still not working
fmk() {
  local file
  file=$(find . -type f | fzf --preview 'cat {}') &&
  local dir
  dir=$(find $KITOB"Secondary Literature/Pickett library" $KITOB"Secondary Literature/Unsorted Secondary Literature" $KITOB"Primary Sources" -type d | fzf)
  mv "$file" "$dir"
}


# Fuzzy Move File (recursively within directory)
fmr() {
  local file
  file=$(find . -type f | fzf --preview 'cat {}') &&
  local dir
  dir=$(find . -type d | fzf)
  mv "$file" "$dir"
}


# Fuzzy search file contents (current folder)
alias fc="grep --line-buffered --color=never -r "" * | fzf"




f() {
    sels=( "${(@f)$(fd "${fd_default[@]}" "${@:2}"| fzf)}" )
    test -n "$sels" && print -z -- "$1 ${sels[@]:q:q}"
}
